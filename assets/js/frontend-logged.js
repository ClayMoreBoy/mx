!function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="/assets/",e(0)}([function(t,e,n){n(22)(),n(27)(),n(26)(),n(25)(),n(21)(),n(28)(),n(29)(),n(13)(),n(14)(),n(17)(),n(15)(),n(33)(),n(16)(),n(18)(),n(10)(),n(19)(),n(20)(),n(39)(),n(40)(),n(42)(),n(35)(),n(47)(),n(46)()},function(t,e){t.exports=function(t){"loading"!=document.readyState?t():document.addEventListener?document.addEventListener("DOMContentLoaded",t):document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&t()})}},function(t,e){t.exports=function(){var t,e=Array.prototype.slice.call(arguments),n=e.length,a={},r="",i=0,o=0,s=0,c=0,l=Object.prototype.toString,u=!0;for(s=0;n>s;s++)if("[object Array]"!==l.call(e[s])){u=!1;break}if(u){for(u=[],s=0;n>s;s++)u=u.concat(e[s]);return u}for(s=0,c=0;n>s;s++)if(t=e[s],"[object Array]"===l.call(t))for(o=0,i=t.length;i>o;o++)a[c++]=t[o];else for(r in t)t.hasOwnProperty(r)&&(parseInt(r,10)+""===r?a[c++]=t[r]:a[r]=t[r]);return a}},function(t,e,n){var a=n(7),r=n(4),i={},o=document;t.exports=function(t,e,n){function s(t){i.$c.innerHTML='<b class="number">'+t+"</b>"}function c(){i.$t_container.classList.remove("show")}i||(i={}),i.si||(i.si=!1),i.$t_container||(i.$c=o.createElement("i"),i.$c.setAttribute("class","btn-close fa fa-times fa-fw"),i.$t_container=o.createElement("div"),i.$t_container.id="ajax-loading-container",i.$t=o.createElement("div"),i.$t.id="ajax-loading",i.$t_container.appendChild(i.$t),i.$t_container.appendChild(i.$c),o.body.appendChild(i.$t_container),i.$c.addEventListener(r,function(){c(),clearInterval(i.si)})),clearInterval(i.si),n>0?(s(n),i.si=setInterval(function(){n--,s(n),0>=n&&(c(),i.$c.innerHTML="",i.si&&clearInterval(i.si))},1e3)):i.$c.innerHTML="","hide"===t?c():(setTimeout(function(){i.$t_container.className=t+" show"},1),i.$t.innerHTML=a(t,e))}},function(t,e){t.exports="touchend"in document.documentElement?"touchend":"click"},function(t,e){t.exports=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}},function(t,e){t.exports=function(t,e){var n=function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},a=function(t,e,a,r){return a>r?e:t+(e-t)*n(a/r)},r=function(e,n,r,i){n=n||500,i=i||window;var o=window.pageYOffset,s=parseInt(t),c=+new Date,l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){window.setTimeout(t,15)},u=function(){var t=+new Date-c;i!==window?i.scrollTop=a(o,s,t,n):window.scroll(0,a(o,s,t,n)),t>n?"function"==typeof r&&r(e):l(u)};u()};r(t)}},function(module,exports){module.exports=function(){var defaults=["type","size","content","wrapper"],types=["loading","success","error","question","info","ban","warning"],sizes=["small","middle","large"],wrappers=["div","span"],type,icon,size,wrapper,content,args=arguments;switch(args.length){case 0:return!1;case 1:content=args[0];break;case 2:type=args[0],content=args[1];break;default:for(var i in args)eval(defaults[i]+" = args[i];")}switch(type||(type=types[0]),size||(size=sizes[0]),wrapper||(wrapper=wrappers[0]),type){case"success":icon="check-circle";break;case"error":icon="times-circle";break;case"info":case"warning":icon="exclamation-circle";break;case"question":case"help":icon="question-circle";break;case"ban":icon="minus-circle";break;case"loading":case"spinner":icon="circle-o-notch fa-spin";break;default:icon=type}return"<"+wrapper+' class="tip-status tip-status-'+size+" tip-status-"+type+'"><i class="fa fa-'+icon+' fa-fw"></i> '+content+"</"+wrapper+">"}},function(t,e){t.exports=function(t){"use strict";function e(){r=window.pageYOffset,n()}function n(){i||(requestAnimationFrame(a),i=!0)}function a(){t(r),i=!1}var r=window.pageYOffset,i=!1;window.addEventListener("scroll",e)}},function(t,e,n){var a=n(3);t.exports=function(){this.process_url=!1,this.loading_tx=!1,this.error_tx="Sorry, the server is busy, please try again later.",this.$fm=!1,this.done_close=!1,this.done=function(){},this.before=function(){},this.always=function(){},this.fail=function(){};var t=this,e={};this.init=function(){t.$fm.addEventListener("submit",n.init,!1)};var n={init:function(){t.before(),e.$submit||(e.$submit=t.$fm.querySelector(".submit"),e.submit_ori_tx=e.$submit.innerHTML,e.submit_loading_tx=t.loading_tx?t.loading_tx:e.$submit.getAttribute("data-loading-text")),e.$submit.innerHTML=e.submit_loading_tx,e.$submit.setAttribute("disabled",!0),a("loading",e.submit_loading_tx);var n=new XMLHttpRequest,r=new FormData(t.$fm);r.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),n.open("POST",t.process_url),n.send(r),n.onload=function(){if(n.status>=200&&n.status<400){var r;try{r=JSON.parse(n.responseText)}catch(i){r=n.responseText}if(r&&r.status){if("success"===r.status)t.done_close?a(r.status,r.msg,t.done_close):a(r.status,r.msg);else if("error"===r.status){if(a(r.status,r.msg),r.code&&-1!==r.code.indexOf("pwd")){var o=t.$fm.querySelector("input[type=password]");o&&o.select()}else if(r.code&&-1!==r.code.indexOf("email")){var s=t.$fm.querySelector("input[type=email]");s&&s.select()}e.$submit.removeAttribute("disabled")}e.$submit.innerHTML=e.submit_ori_tx,t.done(r)}else a("error",t.error_tx),e.$submit.removeAttribute("disabled"),e.$submit.innerHTML=e.submit_ori_tx,t.fail(r);t.always(r)}},n.onerror=function(){a("error",t.error_tx),e.$submit.removeAttribute("disabled"),e.$submit.innerHTML=e.submit_ori_tx,t.fail()}}};return this}},function(t,e,n){var a=n(3),r=n(2),i=n(6);t.exports=function(){"use strict";function t(){ready(function(){o.init(),pagi_ajax(),img_link()})}if(window.THEME_CONFIG.theme_page_nagination_ajax){var e={},n={process_url:"",post_id:"",numpages:"",url_tpl:"",page:1,lang:{M01:"Loading, please wait...",M02:"Content loaded.",M03:"Already first page.",M04:"Already last page.",E01:"Sorry, some server error occurred, the operation can not be completed, please try again later."}};n=r(n,window.THEME_CONFIG.theme_page_nagination_ajax);var o={init:function(){var t=this;e.$post=document.querySelector(".singular-post"),e.$nagi=document.querySelector(".page-pagination"),e.$next=e.$nagi.querySelector(".next"),e.$prev=e.$nagi.querySelector(".prev"),e.$next_number=e.$next.querySelector(".current-page"),e.$prev_number=e.$prev.querySelector(".current-page"),e.$post&&e.$nagi&&(e.last_scroll_y=window.pageYOffset,e.ticking=!1,e.post_top,e.max_bottom,e.is_hide=!1,window.addEventListener("resize",function(){t.reset_nagi_style()}),this.bind())},bind:function(t){t===!0&&(e.$nagi=document.querySelector(".page-pagination")),this.reset_nagi_style(),this.bind_scroll()},reset_nagi_style:function(){e.post_top=this.getElementTop(e.$post),e.post_height=e.$post.querySelector(".entry-body").clientHeight,e.max_bottom=e.post_top+e.post_height,e.$nagi.style.left=this.getElementLeft(e.$post)+"px",e.$nagi.style.width=e.$post.clientWidth+"px"},bind_scroll:function(){function t(t){t>=e.max_bottom-250?n&&(e.$nagi.classList.remove("fixed"),n=!1):n||(e.$nagi.classList.add("fixed"),n=!0)}var n=!1;i(t)},getElementLeft:function(t){for(var e=t.offsetLeft,n=t.offsetParent;null!==n;)e+=n.offsetLeft,n=n.offsetParent;return e},getElementTop:function(t){for(var e=t.offsetTop,n=t.offsetParent;null!==n;)e+=n.offsetTop,n=n.offsetParent;return e}};img_link=function(){function t(t){t.preventDefault(),e.$as[1].click()}if(e.$nagi){var n=e.$post_content.querySelectorAll("a > img"),a=n.length;if(0!=a)for(var r=0;a>r;r++){var i=n[r].parentNode;i.href="javascript:;",i.addEventListener(click_handle,t)}}},pagi_ajax=function(){function t(t){return e.post_contents&&e.post_contents[t]?e.post_contents[t]:!1}function r(t,n){e.post_contents||(e.post_contents=[]),e.post_contents[t]=n}function i(t){e.$post_content.innerHTML=t}function o(){return e.$current==e.$next?n.page+1:n.page-1}function s(r){if(r.preventDefault(),e.$current=this,p())return a("warning",n.lang.M03,3),!1;if(m())return a("warning",n.lang.M04,3),!1;if(t(o()))return i(t(o())),d(),u(),void img_link();a("loading",n.lang.M01);var s=new XMLHttpRequest;s.open("get",n.process_url+"&page="+o()),s.send(),s.onload=function(){if(s.status>=200&&s.status<400){var t;try{t=JSON.parse(s.responseText)}catch(e){t=s.responseText}t&&t.status?c(t):l(t)}else l()},s.onerror=function(){l()}}function c(t){"success"===t.status?(r(o(),t.content),i(t.content),d(),u(),img_link(),a("hide")):"error"===t.status&&a(t.status,t.msg)}function l(t){t?a("error",t):a("error",n.lang.E01)}function u(){var t=n.url_tpl.replace(9999,n.page);history.replaceState(null,null,t),location.hash="",location.hash="#"+e.$post.id}function d(){n.page=o(),e.$next_number.innerHTML=n.page,e.$prev_number.innerHTML=n.page}function p(){return e.$current==e.$prev&&1==n.page}function m(){return e.$current==e.$next&&n.page==n.numpages}if(e.$nagi){e.$post_content=document.querySelector(".entry-content"),e.$as=e.$nagi.querySelectorAll("a");for(var f=0,g=e.$as.length;g>f;f++)e.$as[f].addEventListener(click_handle,s);r(n.page,e.$post_content.innerHTML)}},t()}}},function(t,e){t.exports=function(t){for(var e=t.offsetTop,n=t.offsetParent;null!==n;)e+=n.offsetTop,n=n.offsetParent;return e}},function(t,e){t.exports=function(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}},function(t,e,n){var a=n(2),r=n(1),i=n(3),o=n(5);t.exports=function(){"use strict";function t(){r(function(){d.set(),l.$comment_list_container=c("comment-list-"+u.post_id),l.$comments=c("comments"),window.addComment=m,p.init();var t=new e;t.lang.loading=u.lang.M01,t.lang.error=window.THEME_CONFIG.lang.E01,t.lang.prev=u.lang.M02,t.lang.next=u.lang.M03,t.lang.midd=u.lang.M04,t.pages=window.DYNAMIC_REQUEST.theme_comment_ajax.pages,t.cpage=window.DYNAMIC_REQUEST.theme_comment_ajax.cpage,t.url_format=u.pagi_process_url,t.init();var a=new n;a.init()})}function e(){function t(t,e){h.comments||(h.comments=[]);for(var n=o(e),a=[],r=0,i=n.length;i>r;r++){var s=n[r].querySelectorAll("img");if(s[0])for(var c=0,l=s.length;l>c;c++)a[c]=new Image,a[c].src=s[c].src}h.comments[t]=e}function e(t){return h.comments&&h.comments[t]?h.comments[t]:!1}function n(){return $.pages<=1?!1:(h.$pagi=document.createElement("div"),h.$pagi.id=$.id,h.$pagi.setAttribute("class","comment-pagination"),h.$pagi.appendChild(a()),h.$pagi.appendChild(c()),h.$pagi)}function a(){var t=$.cpage<=1?"disabled":"",e={"class":"prev btn btn-success "+t,href:"javascript:;"};h.$prev=document.createElement("a");for(var n in e)h.$prev.setAttribute(n,e[n]);return h.$prev.innerHTML=$.lang.prev,h.$prev.addEventListener(click_handle,r),h.$prev}function r(t){return t&&t.preventDefault(),$.cpage<=1?!1:(v=parseInt($.cpage)-1,void f())}function s(){$.cpage<=1?h.$prev.classList.add("disabled"):h.$prev.classList.remove("disabled")}function c(){var t=$.cpage>$.pages-1?"disabled":"",e={"class":"next btn btn-default "+t,href:"javascript:;"};h.$next=document.createElement("a");for(var n in e)h.$next.setAttribute(n,e[n]);return h.$next.innerHTML=$.lang.next,h.$next.addEventListener(click_handle,u),h.$next}function u(t){return t&&t.preventDefault(),$.cpage==$.pages?!1:(v=parseInt($.cpage)+1,void f())}function d(){$.cpage==$.pages?h.$next.classList.add("disabled"):h.$next.classList.remove("disabled")}function p(){return $.url_format.replace("=n","="+v)}function f(){if(_(),l.$comments.querySelector("#respond")&&m.cancelMove(),g(),e($.cpage))return l.$comment_list_container.innerHTML=e($.cpage),s(),d(),!1;i("loading",$.lang.loading);var n=new XMLHttpRequest;n.open("GET",p()+"&theme-nonce="+window.DYNAMIC_REQUEST["theme-nonce"]),n.send(),n.onload=function(){if(n.status>=200&&n.status<400){var e;try{e=JSON.parse(n.responseText)}catch(a){e=n.responseText}e&&"success"===e.status?(l.$comment_list_container.innerHTML=e.comments,t($.cpage,e.comments),i("hide"),d(),s()):e&&"error"===e.status?i(e.status,e.msg):i("error",e)}$.always(),n=null},n.onerror=function(){i("error",$.lang.error)}}function g(){$.cpage>=v?$.cpage--:$.cpage++}function _(){location.hash="#none",location.hash="#comments"}this.id="comment-pagination",this.container_id="comment-pagination-container",this.cpage=1,this.pages=1,this.class_name="comment-pagination",this.url_format="",this.lang={loading:"Loading, please wait...",error:"Sorry, some server error occurred, the operation can not be completed, please try again later.",prev:"Previous",next:"Next",midd:"{n} page"},this.before=function(){},this.done=function(){},this.faild=function(){},this.always=function(){};var v,h={},$=this;this.init=function(){return h.$container=document.getElementById($.container_id),h.$container?(h.$container.appendChild(n()),void t($.cpage,l.$comment_list_container.innerHTML)):!1}}function n(){function t(){return s.$respond=c("respond"),s.$fm=c("commentform"),s.$must_logged=c("respond-must-login"),s.$loading_ready=c("respond-loading-ready"),s.$avatar=c("respond-avatar"),s.$area_visitor=c("area-respond-visitor"),s.$comment_parent=c("comment_parent"),s.$comment_ta=c("comment-form-comment"),s.$respond&&s.$fm?(s.$submit_btn=s.$fm.querySelector(".submit"),s.$loading_ready&&s.$loading_ready.parentNode.removeChild(s.$loading_ready),d.registration&&!d.logged?(s.$must_logged.style.display="block",!1):(s.$comment_ta&&s.$comment_ta.addEventListener("keydown",function(t){return 13==t.keyCode&&t.ctrlKey?(s.$submit_btn.click(),!1):void 0},!1),d.logged?(s.$avatar&&(s.$avatar.src=window.DYNAMIC_REQUEST.theme_comment_ajax["avatar-url"]),s.$area_visitor&&s.$area_visitor.parentNode.removeChild(s.$area_visitor)):e(),s.$fm.style.display="block",void s.$fm.addEventListener("submit",n))):!1}function e(){return d.logged?!1:(s.$comment_form_author=c("comment-form-author"),s.$comment_form_email=c("comment-form-email"),s.$comment_form_author&&s.$comment_form_email?(window.DYNAMIC_REQUEST.theme_comment_ajax["user-name"]&&(s.$comment_form_author.value=window.DYNAMIC_REQUEST.theme_comment_ajax["user-name"]),void(window.DYNAMIC_REQUEST.theme_comment_ajax["user-email"]&&(s.$comment_form_email.value=window.DYNAMIC_REQUEST.theme_comment_ajax["user-email"]))):!1)}function n(t){if(""===s.$comment_ta.value.trim())return s.$comment_ta.focus(),i("error",s.$comment_ta.getAttribute("title"),3),!1;if(!d.logged&&d.registration)for(var e=s.$fm.querySelectorAll("input[required]"),n=0,r=e.length;r>n;n++){if("email"===e[n].getAttribute("type")&&!is_email(e[n].value))return i("error",e[n].getAttribute("title"),3),!1;if(""===e[n].value.trim())return i("error",e[n].getAttribute("title"),3),!1}return i("loading",u.lang.M01),s.$submit_btn.setAttribute("disabled",!0),a(),!1}function a(){var t=new XMLHttpRequest,e=new FormData(s.$fm);e.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),t.open("POST",u.process_url),t.send(e),t.onload=function(){if(t.status>=200&&t.status<400){var e;try{e=JSON.parse(t.responseText)}catch(n){e=t.responseText}if(e&&"success"===e.status){e.comment=e.comment.replace("srcset","data-srcset");var a=o(e.comment);if(a.classList.add("new"),0!=s.$comment_parent.value){var r=c(d.prefix_comment_body_id+s.$comment_parent.value);r.insertAdjacentHTML("afterend",'<ul class="children">'+a.innerHTML+"</ul>"),m.cancelMove()}else l.$comment_list_container.appendChild(a);s.$comment_ta.value="";var u=l.$comments.querySelector(".comment-loading");u&&u.parentNode.removeChild(u);var p=c("comment-number-"+e.post_id);p&&(isNaN(p.innerHTML)?p.innerHTML=1:p.innerHTML++),l.$comments.style.display="block",i(e.status,e.msg,3)}else e&&"error"===e.status?(i(e.status,e.msg),s.$comment_ta.focus()):(i("error",e),s.$comment_ta.select())}else i("error",window.THEME_CONFIG.lang.E01);s.$submit_btn.removeAttribute("disabled")},t.onerror=function(){i("error",window.THEME_CONFIG.lang.E01),s.$submit_btn.removeAttribute("disabled")}}function r(){return s.$goto=c("goto-comment"),s.$comment=c("comment-form-comment"),s.$goto&&s.$comment?(s.$goto.style.display="block",void(s.$goto.onclick=function(){s.$comment.focus()})):!1}var s={},d={logged:window.DYNAMIC_REQUEST.theme_comment_ajax.logged,registration:window.DYNAMIC_REQUEST.theme_comment_ajax.registration,prefix_comment_body_id:"comment-body-"};this.init=function(){r(),t()}}function s(){if(!location.hash||""===location.hash)return!1;var t=location.hash,e=c(t.substr(1));return e?(location.hash="e",void(location.hash=t)):!1}function c(t){return document.getElementById(t)}if(!window.THEME_CONFIG.theme_comment_ajax)return!1;var l={},u={process_url:"",pagi_process_url:"",post_id:"",lang:{M01:"Loading, please wait...",M02:"Previous",M03:"Next",M04:"{n} page"}};u=a(u,window.THEME_CONFIG.theme_comment_ajax);var d={set:function(t){return l.$count=c("comment-number-"+u.post_id),l.$count?void(l.$count.innerHTML=t?t:window.DYNAMIC_REQUEST.theme_comment_ajax.count):!1}},p={init:function(){return window.DYNAMIC_REQUEST.theme_comment_ajax.comments?(l.$comment_list_container.innerHTML=window.DYNAMIC_REQUEST.theme_comment_ajax.comments,void s()):!1},get:function(){var t=this,e=new XMLHttpRequest,n=n({type:"get-comments","post-id":u.post_id,"theme-nonce":window.DYNAMIC_REQUEST["theme-nonce"]});e.open("GET",u.pagi_process_url+"&"+n),e.send(),e.onload=function(){if(e.status>=200&&e.status<400){var n;try{n=JSON.parse(e.responseText)}catch(a){n=e.responseText}n&&n.status?t.done(n):t.fail(n),t.always(n)}}},done:function(t){"success"===t.status&&(l.$comment_list_container.innerHTML=t.comments)},faild:function(t){},always:function(t){}},m={cache:{},cancelMove:function(){var t=this;t.cache.$parent.value="0",t.cache.$tmp.parentNode.insertBefore(t.cache.$respond,t.cache.$tmp),t.cache.$cancel.style.display="none",t.cache.$cancel.onclick=null},moveForm:function(t,e,n,a){var r=this;return r.cache.$comm=c(t),r.cache.$respond=c(n),r.cache.$cancel=c("cancel-comment-reply-link"),r.cache.$parent=c("comment_parent"),r.cache.$post=c("comment_post_ID"),r.cache.$comment=c("comment-form-comment"),r.cache.$comm&&r.cache.$respond&&r.cache.$cancel&&r.cache.$parent?(a=a||!1,r.cache.$tmp||(r.cache.$tmp=document.createElement("div"),r.cache.$tmp.id="wp-temp-form-div",r.cache.$tmp.style.display="none",r.cache.$respond.parentNode.insertBefore(r.cache.$tmp,r.cache.$respond)),r.cache.$comm.parentNode.insertBefore(r.cache.$respond,r.cache.$comm.nextSibling),r.cache.$post&&a&&(r.cache.$post.value=a),r.cache.$parent.value=e,r.cache.$cancel.style.display="block",r.cache.$cancel.onclick=function(){return r.cancelMove(),!1},r.cache.$comment&&r.cache.$comment.focus(),!1):void 0}};t()}},function(t,e,n){var a=n(1),r=n(4);t.exports=function(){"use strict";function t(){c.$emotion_btns=document.querySelectorAll(".comment-emotion-pop-btn"),c.$pop=document.querySelectorAll(".comment-emotion-area-pop .pop"),c.$comment=s("comment-form-comment"),c.$emotion_faces=document.querySelectorAll(".comment-emotion-area-pop a"),c.$emotion_btns[0]&&(c.pop_hide=[],c.replaced=[],o(),e())}function e(){function t(t){t&&t.preventDefault(),c.$comment.focus();var e=c.$comment.selectionStart,n=c.$comment.value;c.$pop[c.active_pop_i].style.display="none",c.$comment.value=n.substring(0,e)+" "+this.getAttribute("data-content")+" "+n.substring(e)}for(var e=0,n=c.$emotion_faces.length;n>e;e++)c.$emotion_faces[e].addEventListener(r,t)}function n(t){t&&t.stopPropagation(),c.$last_show_pop&&(c.$last_show_pop.style.display="none"),document.body.removeEventListener(r,n)}function i(t){t&&t.stopPropagation();for(var e=0,a=c.$pop.length;a>e;e++)c.pop_hide[e]!==!0&&(c.$pop[e].style.display="none",c.pop_hide[e]=!0),this==c.$emotion_btns[e]&&(c.active_pop_i=e,c.pop_hide[e]=!1,c.$pop[e].style.display="block",c.$last_show_pop=c.$pop[e]);if(!c.replaced[c.active_pop_i]){c.replaced[c.active_pop_i]=!0;for(var i=c.$pop[c.active_pop_i].querySelectorAll("img"),e=0,a=i.length;a>e;e++)i[e].src=i[e].getAttribute("data-url"),i[e].removeAttribute("data-url")}document.body.addEventListener(r,n)}function o(){for(var t=0,e=c.$emotion_btns.length;e>t;t++)c.$emotion_btns[t].addEventListener(r,i)}function s(t){return document.getElementById(t)}a(t);var c={}}},function(t,e,n){var a=n(1),r=n(6),i=n(23),o=n(11),s=n(24),c=n(8);t.exports=function(){"use strict";function t(){p.$boxes=document.querySelectorAll(".homebox"),p.$boxes[0]&&(p.len=p.$boxes.length,p.$last_boxes=p.$boxes[p.len-1],p.ori_bottom=o(p.$last_boxes)+p.$last_boxes.offsetHeight,p.ori_offset_left=i(p.$boxes[0]),p.ori_offset_top=o(p.$boxes[0]),d(),e())}function e(){function t(t){t>=p.target_datas[0].offset_top?p.is_fixed||(p.$nav.style.position="fixed",p.$nav.style.top=p.main_nav_gutter+"px",p.is_fixed=!0):p.is_fixed&&(p.$nav.style.position="absolute",p.$nav.style.top=p.ori_offset_top+"px",p.is_fixed=!1);for(var e=0,n=p.target_datas.length;n>e;e++)t>=p.target_datas[e].offset_top&&t<p.target_datas[e].offset_top+p.target_datas[e].height?p.$items[e].classList.add("active"):p.$items[e].classList.remove("active")}c(t)}function n(){p.$nav.style.left=p.ori_offset_left+"px",p.$nav.style.top=p.ori_offset_top+"px"}function l(t){t.preventDefault(),r(this.getAttribute("data-scroll-top"))}function u(){for(var t=0,e=p.$boxes.length;e>t;t++){var n=p.$boxes[t].querySelector(".title a"),a=n.textContent||n.innerText,r=n.querySelector("i"),i=o(p.$boxes[t])-p.main_nav_gutter,s=document.createElement("a");if(r){var c=r.getAttribute("class");p.target_datas[t]={offset_top:i,height:parseInt(getComputedStyle(p.$boxes[t]).marginBottom)+p.$boxes[t].clientHeight},s.setAttribute("data-scroll-top",i),s.href="#"+p.$boxes[t].id,s.title=a,s.innerHTML='<i class="'+c+' fa-fw"></i>',s.addEventListener("click",l),p.$items[t]=s,p.$nav.appendChild(p.$items[t])}}}function d(){p.$nav=document.createElement("nav"),p.$nav.id="homebox-nav",u(),n(),document.body.appendChild(p.$nav)}if(!s){var p={is_fixed:!1,target_datas:[],$items:[],main_nav_gutter:70};a(t)}}},function(t,e,n){var a=n(3),r=n(1),i=n(2);t.exports=function(){"use strict";function t(){r(e)}function e(){if(s.$btns=document.querySelectorAll(".post-point-btn"),!s.$btns[0])return!1;for(var t=0,e=s.$btns.length;e>t;t++)s.$btns[t].addEventListener("click",n)}function n(t){function e(t){"success"===t.status?(a(t.status,t.msg,3),s.$number.innerHTML=t.points):a(t.status,t.msg)}function n(t){a("error",window.THEME_CONFIG.lang.E01)}t.preventDefault(),t.stopPropagation();var r=this.getAttribute("data-post-id"),i=this.getAttribute("data-points");s.$number=o("post-point-number-"+r),a("loading",window.THEME_CONFIG.lang.M01);var l=new XMLHttpRequest,u=new FormData;u.append("post-id",r),u.append("points",i),u.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),l.open("post",c.process_url),l.send(u),l.onload=function(){if(l.status>=200&&l.status<400){var t;try{t=JSON.parse(l.responseText)}catch(r){t=l.responseText}t&&t.status?e(t):n(t)}else a("error",window.THEME_CONFIG.lang.E01)},l.onerror=function(){a("error",window.THEME_CONFIG.lang.E01)}}function o(t){return document.getElementById(t)}if(window.THEME_CONFIG.custom_post_point){var s={},c={process_url:""};c=i(c,window.THEME_CONFIG.custom_post_point),t()}}},function(module,exports,__webpack_require__){var ready=__webpack_require__(1),array_merge=__webpack_require__(2);module.exports=function(){"use strict";function bind(){cache.$container=document.querySelector(".theme_custom_slidebox-container"),cache.$container&&(cache.$main=cache.$container.querySelector(".area-main"),cache.$blurs=cache.$container.querySelectorAll(".area-blur .item"),eval(config.type+"();"))}function scroller(){function t(t){r||(r=!0),a||(a=t.clientX),cache.$main.scrollLeft>=0&&(cache.$main.scrollLeft=cache.$main.scrollLeft-(a-t.clientX)),a=t.clientX}function e(t){r&&(r=!1),t.target.width||(a=0)}function n(){function t(t){var e=this.getAttribute("data-i");if(cache.current_i==e)return!1;cache.current_i=e;for(var n=0;n<cache.len;n++)cache.$blurs[n].classList.contains("active")&&cache.$blurs[n].classList.remove("active"),cache.$as[n].classList.contains("active")&&cache.$as[n].classList.remove("active");this.classList.add("active"),cache.$blurs[e].classList.add("active")}cache.$as=cache.$main.querySelectorAll("a"),cache.current_i=0,cache.len=cache.$as.length;for(var e=0;e<cache.len;e++)cache.$as[e].setAttribute("data-i",e),cache.$as[e].addEventListener("mouseover",t)}var a,r=!1;cache.$main.addEventListener("mouseout",e),cache.$main.addEventListener("mousemove",t),n()}function candy(){function t(t){var e=this.getAttribute("data-i");if(cache.current_i==e)return!1;cache.current_i=e;for(var n=0;n<cache.len;n++)cache.$blurs[n].classList.contains("active")&&cache.$blurs[n].classList.remove("active"),cache.$mains[n].classList.contains("active")&&cache.$mains[n].classList.remove("active"),cache.$thumbnails[n].classList.contains("active")&&cache.$thumbnails[n].classList.remove("active");this.classList.add("active"),cache.$blurs[e].classList.add("active"),cache.$mains[e].classList.add("active")}cache.$mains=cache.$container.querySelectorAll(".area-main .item"),cache.$thumbnails=cache.$container.querySelectorAll(".area-thumbnail .item"),cache.len=cache.$thumbnails.length,cache.current_i=0;for(var e=0;e<cache.len;e++)cache.$thumbnails[e].setAttribute("data-i",e),cache.$thumbnails[e].addEventListener("mouseover",t)}if(window.THEME_CONFIG.theme_custom_slidebox){var cache={},config={type:"candy"};config=array_merge(config,window.THEME_CONFIG.theme_custom_slidebox),ready(bind)}}},function(t,e,n){var a=n(1),r=n(2),i=n(4);t.exports=function(){"use strict";function t(){a(e)}function e(){return d()?(m.$main=p("main"),m.$side=p("sidebar-container"),m.$btn.addEventListener(i,u),void(1==localStorage.getItem(f.key)&&s())):!1}function o(){window.jQuery&&jQuery(window).resize();try{var t=n(10);t.reset_nagi_style()}catch(e){}}function s(t){m.$btn.classList.remove("fa-angle-right"),m.$btn.classList.add("fa-angle-left"),m.$main.classList.add("expand"),m.$side.classList.add("expand"),o(),t&&localStorage.setItem(f.key,1)}function c(){m.$btn.classList.remove("fa-angle-left"),m.$btn.classList.add("fa-angle-right"),m.$main.classList.remove("expand"),m.$side.classList.remove("expand"),o(),localStorage.removeItem(f.key)}function l(){return m.$main.classList.contains("expand")}function u(){l()?c():s(!0)}function d(){var t=document.querySelector(".singular-post");if(!t)return!1;var e=document.createElement("i");return e.id="full-width-mode",e.title=f.lang.M01,e.setAttribute("class","fa fa-angle-right fa-2x"),t&&t.appendChild(e),m.$btn=e,!0}function p(t){return document.getElementById(t)}if(window.THEME_CONFIG.theme_full_width_mode){var m={},f={key:"full-width-mode",lang:{M01:"Full width mode"}};f=r(f,window.THEME_CONFIG.theme_full_width_mode),t()}}},function(t,e,n){var a=n(1);t.exports=function(){"use strict";function t(){var t=document.querySelectorAll(".bdsharebuttonbox");if(!t[0])return!1;for(var e={common:{bdSnsKey:{},dText:!1,bdMiniList:!1,bdMini:2,bdPic:!1,bdStyle:!1,bdSize:16},share:[],selectShare:!1},n=0,a=t.length;a>n;n++){var r="bdshare_tag_"+n,i=JSON.parse(t[n].getAttribute("data-bdshare").replace(/\'/g,'"'));i.bdSign="off",i.tag=r,t[n].setAttribute("data-tag",r),e.share.push(i)}window._bd_share_config=e,setTimeout(function(){var t=document.createElement("script");t.src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5),t.async=!0,document.getElementsByTagName("head")[0].appendChild(t)},5e3)}a(t)}},function(t,e,n){var a=n(1);t.exports=function(){"use strict";function t(){if(window.DYNAMIC_REQUEST&&window.DYNAMIC_REQUEST.theme_post_views)for(var t in window.DYNAMIC_REQUEST.theme_post_views){var e=document.getElementById("post-views-number-"+t);e&&(e.innerHTML=window.DYNAMIC_REQUEST.theme_post_views[t])}}window.THEME_CONFIG.theme_post_views&&a(t)}},function(t,e,n){var a=n(1);t.exports=function(){"use strict";function t(t){this.value&&(location.href=this.value)}function e(){for(var e=0,a=n.length;a>e;e++)n[e].addEventListener("change",t)}var n=document.querySelectorAll(".archive-pagination select");n[0]&&a(e)}},function(t,e,n){var a=n(6),r=n(4),i=n(1);t.exports=function(){"use strict";function t(){i(function(){var t=document.getElementById("back-to-top");t&&t.addEventListener(r,function(t){t.preventDefault(),a(0)})})}t()}},function(t,e){t.exports=function(t){for(var e=t.offsetLeft,n=t.offsetParent;null!==n;)e+=n.offsetLeft,n=n.offsetParent;return e}},function(t,e){t.exports=/Mobi/.test(navigator.userAgent)},function(t,e,n){var a=n(4),r=n(1);t.exports=function(){"use strict";function t(){if(s.$toggles=document.querySelectorAll("a[data-mobile-target]"),s.$toggles[0]){e();for(var t=0,n=s.$toggles.length;n>t;t++)s.$toggles[t].addEventListener(a,o)}}function e(){s.$layer=document.createElement("div"),s.$layer.id="mobile-on-layer",s.$layer.addEventListener(a,i),document.body.appendChild(s.$layer)}function n(){var t=s.$last_click_btn.getAttribute("data-icon-active"),e=s.$last_click_btn.getAttribute("data-icon-original");document.body.classList.add("menu-on"),s.$last_target.classList.add("on"),t&&e&&(s.$last_click_btn.classList.remove(e),s.$last_click_btn.classList.add(t));var n=s.$last_click_btn.getAttribute("data-focus-target");if(n){var a=document.querySelector(n);a&&a.focus()}}function i(){var t=s.$last_click_btn.getAttribute("data-icon-active"),e=s.$last_click_btn.getAttribute("data-icon-original");document.body.classList.remove("menu-on"),s.$last_target.classList.remove("on"),t&&e&&(s.$last_click_btn.classList.remove(t),s.$last_click_btn.classList.add(e))}function o(t){s.$last_target=document.querySelector(this.getAttribute("data-mobile-target")),s.$last_click_btn=this,s.$last_target.classList.contains("on")?i():n()}var s={};r(t)}},function(t,e,n){var a=n(4);t.exports=function(){function t(){var t=i.getAttribute("data-icon-active"),e=i.getAttribute("data-icon-original");o.classList.add("on"),t&&e&&(i.classList.remove(e),i.classList.add(t));var n=i.getAttribute("data-focus-target");if(n){var a=document.querySelector(n);a&&setTimeout(function(){a.focus()},500)}}function e(t){t&&t.preventDefault();var e=i.getAttribute("data-icon-active"),n=i.getAttribute("data-icon-original");o.classList.remove("on"),e&&n&&(i.classList.remove(e),i.classList.add(n))}function n(n){o=document.querySelector(this.getAttribute("data-toggle-target")),i=this,o.classList.contains("on")?e():t()}var r=document.querySelectorAll("a[data-toggle-target]");if(r[0])for(var i,o,s=0,c=r.length;c>s;s++)r[s].addEventListener(a,n)}},function(t,e,n){var a=n(8),r=n(1);t.exports=function(){"use strict";function t(){r(e)}function e(){s.$menu=document.querySelector(".nav-main"),s.$menu&&(s.menu_height=s.$menu.offsetHeight,s.y=0,s.fold=!1,o(window.pageYOffset),a(o))}function n(){s.fold||(s.$menu.classList.add("fold"),s.$menu.classList.remove("top"),s.fold=!0)}function i(){s.fold&&(s.$menu.classList.remove("fold"),s.fold=!1)}function o(t){t<=s.menu_height?(i(),s.$menu.classList.add("top")):s.y<=t?n():s.y-t<100&&i(),s.y=t}var s={};t()}},function(t,e){t.exports=function(){function t(t){t&&t.preventDefault(),setTimeout(function(){a.focus()},100)}var e=document.querySelector(".main-nav a.search");if(!e)return!1;var n=document.querySelector(e.getAttribute("data-toggle-target")),a=n.querySelector('input[type="search"]'),r=function(){return""===a.value.trim()?(a.focus(),!1):void 0};e.addEventListener(click_handle,t),n.onsubmit=r}},function(t,e,n){var a=n(1);t.exports=function(){function t(){a(e)}function e(){var t=document.querySelectorAll(".hide-no-js"),e=document.querySelectorAll(".hide-on-js");if(t[0])for(var n=0,a=t.length;a>n;n++)t[n].style.display="none";if(e[0])for(var n=0,a=e.length;a>n;n++)e[n].style.display="none"}t()}},,,,function(t,e,n){var a=n(1),r=n(2),i=n(51),o=n(3),s=n(7),c=n(12),l=n(9);t.exports=function(){"use strict";function t(){p(),u(),n(),d()}function e(){return document.querySelectorAll(".clt-list").length}function n(){function t(t){t&&t.preventDefault();var a=e();return a<g.min_posts?(o("error",g.lang.E02,3),!1):a>g.max_posts?(o("error",g.lang.E03,3),!1):void n()}function n(){for(var t=document.querySelectorAll(".clt-list"),e="",n=0,r=t.length;r>n;n++){
for(var s=t[n].querySelectorAll("[required]"),c=0,l=s.length;l>c;c++)if(""===s[c].value.trim())return o("error",s[c].getAttribute("title"),3),s[c].focus(),!1;var u=t[n].getAttribute("data-id"),d=t[n].querySelectorAll("img"),p=d[d.length-1].src;e+=i(g.tpl_preview,["%hash%","%title%","%thumbnail%","%content%"],[u,m("clt-list-post-title-"+u).value,p,m("clt-list-post-content-"+u).value])}a(e)}function a(t){f.$preview_container.innerHTML=t}var r=m("clt-preview");return f.$preview_container=m("clt-preview-container"),r?void r.addEventListener("click",t):!1}function u(){function t(){var t=function(t){if(t&&t.preventDefault(),e()>=g.max_posts)return o("error",g.lang.E03,3),!1;var i,s=Date.now(),c=document.createElement("div");c.innerHTML=n(s),i=c.firstChild,i.classList.add("delete"),r.$container.appendChild(i),a(i),setTimeout(function(){i.classList.remove("delete")},1)};r.$add.addEventListener("click",t)}function n(t){return g.tpl_input.replace(/%placeholder%/g,t)}function a(t){function n(n){var a=function(n){return n&&n.preventDefault(),e()<=g.min_posts?(o("error",g.lang.E02,3),!1):(t.classList.add("delete"),void setTimeout(function(){t.parentNode.removeChild(t)},500))};m("clt-list-del-"+n).addEventListener("click",a)}function a(t){function e(){var e=m("clt-list-post-id-"+t),a=function(e){e.preventDefault();var a=this.value;return""===a.trim()?!1:isNaN(a.trim())===!0?(this.select(),o("error",g.lang.E04,3),!1):void(r(a)?i(a,t):n(a,t,this))};e.addEventListener("change",a,!1),e.addEventListener("blur",a,!1)}function n(t,e,n){function r(r){r&&"success"===r.status?(a(t,r),i(t,e),o(r.status,r.msg,3)):r&&"error"===r.status?(a(t,r),n.select(),o(r.status,r.msg,3)):o("error",r)}o("loading",g.lang.M03);var s=new XMLHttpRequest,l={type:"get-post","post-id":t,"theme-nonce":window.DYNAMIC_REQUEST["theme-nonce"]};s.open("GET",g.process_url+"&"+c(l)),s.send(),s.onload=function(){if(s.status>=200&&s.status<400){var t;try{t=JSON.parse(s.responseText)}catch(e){t=s.responseText}r(t)}else o("error",g.lang.E01)},s.onerror=function(){o("error",g.lang.E01)}}function a(t,e){return f.posts&&f.posts[t]?!1:(f.posts||(f.posts={}),void(f.posts[t]={thumbnail:e.thumbnail,title:e.title,excerpt:e.excerpt}))}function r(t,e){return f.posts&&f.posts[t]?e?f.posts[t][e]:f.posts[t]:!1}function i(t,e){var n=m("clt-list-post-content-"+e),a=m("clt-list-thumbnail-"+e),r=m("clt-list-thumbnail-url-"+e);f.posts[t].title&&(m("clt-list-post-title-"+e).value=f.posts[t].title),f.posts[t].excerpt&&""===n.value.trim()&&(n.value=f.posts[t].excerpt),f.posts[t].thumbnail&&(a.src=f.posts[t].thumbnail.url,r.value=f.posts[t].thumbnail.url)}e()}if(!t)return!1;var r=t.getAttribute("data-id");n(r),a(r)}var r={},i=document.querySelectorAll(".clt-list");if(!i[0])return!1;r.$add=m("clt-add-post"),r.$container=m("clt-lists-container");for(var s=0,l=i.length;l>s;s++)a(i[s]);t()}function d(){var t={};if(t.$fm=m("fm-clt"),!t.$fm)return!1;var e=new l;e.$fm=t.$fm,e.process_url=g.process_url,e.error_tx=g.lang.E01,e.init()}function p(){function t(t){t.stopPropagation(),t.preventDefault(),c.files=t.dataTransfer.files,n(c.files[0])}function e(t){t.stopPropagation(),t.preventDefault(),c.files=t.target.files.length?t.target.files:t.originalEvent.dataTransfer.files,n(c.files[0])}function n(t){var e=new FileReader;e.onload=function(e){a(t)},e.readAsDataURL(t)}function a(t){r("loading",g.lang.M01);var e=new FormData,n=new XMLHttpRequest;e.append("type","add-cover"),e.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),e.append("img",t),n.open("post",g.process_url),n.send(e),n.upload.onprogress=function(t){if(t.lengthComputable){var e=t.loaded/t.total*100;c.$progress_bar.style.width=e+"%"}},n.onload=function(){if(n.status>=200&&n.status<400){var t;try{t=JSON.parse(n.responseText)}catch(e){t=n.responseText}t&&"success"===t.status?(c.$cover.src=t.thumbnail.url,c.$thumbnail_id.value=t["attach-id"],o(t.status,t.msg,3)):t&&"error"===t.status?o(t.status,t.msg):o("error",t)}else o("error",g.lang.E01);r("hide")},n.onerror=function(){o("error",g.lang.E01)}}function r(t,e){return"hide"===t?(c.$progress.style.display="none",c.$file_area.style.display="block",!1):(c.$file_area.style.display="none",c.$progress.style.display="block",c.$progress_bar.style.width="10%",void(c.$progress_tx.innerHTML=s(t,e)))}var i=m("clt-file"),c={};return c.$cover=m("clt-cover"),c.$progress=m("clt-file-progress"),c.$tip=m("clt-file-tip"),c.$progress_bar=m("clt-file-progress-bar"),c.$progress_tx=m("clt-file-progress-tx"),c.$thumbnail_id=m("clt-thumbnail-id"),c.$file_area=m("clt-file-area"),i?(i.addEventListener("change",e),i.addEventListener("drop",t),void i.addEventListener("dragover",e)):!1}function m(t){return document.getElementById(t)}if(window.THEME_CONFIG.theme_custom_collection){var f={},g={process_url:"",tpl_input:"",tpl_preview:"",min_posts:5,max_posts:10,lang:{M01:"Loading, please wait...",M02:"A item has been deleted.",M03:"Getting post data, please wait...",M04:"Previewing, please wait...",E01:"Sorry, server is busy now, can not respond your request, please try again later.",E02:"Sorry, the minimum number of posts is %d.",E03:"Sorry, the maximum number of posts is %d.",E04:"Sorry, the post id must be number, please correct it."}};g=r(g,window.THEME_CONFIG.theme_custom_collection),a(t)}}},,function(t,e,n){var a=n(1),r=n(2),i=n(3),o=n(9),s=n(55);t.exports=function(){"use strict";function t(t){return document.getElementById(t)}function e(){a(n)}function n(){return I.$fm=t("fm-ctb"),I.$post_id=t("ctb-post-id"),I.$post_title=t("ctb-title"),I.$post_content=t("ctb-content"),I.$post_excerpt=t("ctb-excerpt"),I.$file_area=t("ctb-file-area"),I.$file_btn=t("ctb-file-btn"),I.$file=t("ctb-file"),I.$files=t("ctb-files"),I.$file_progress_container=t("ctb-file-progress-container"),I.$file_progress=t("ctb-file-progress"),I.$file_completion_tip=t("ctb-file-completion"),I.$split_number=t("ctb-split-number"),I.$batch_insert=t("ctb-batch-insert-btn"),I.$fm?(f(),g(),H(),q(),C(I.$fm),c(),l(),N.bind(),void S()):!1}function c(){var t=function(){localStorage.setItem("ctb-split-number",this.value)};I.$split_number.addEventListener("change",t)}function l(){var t=parseInt(localStorage.getItem("ctb-split-number"));t>0&&(I.$split_number.value=t)}function u(t){var e={full:{url:t.full.url},large:{url:t.large.url,width:t.large.width,height:t.large.height},thumbnail:{url:t.thumbnail.url},"attach-id":t["attach-id"]};return e["attach-page-url"]=t["attach-page-url"],e}function d(t){var e=tinymce.editors["ctb-content"];e&&!e.isHidden()?tinymce.editors["ctb-content"].setContent(t):I.$post_content.value=t}function p(){var t=tinymce.editors["ctb-content"];return t&&!t.isHidden()?tinymce.editors["ctb-content"].getContent():I.$post_content.value}function m(t){var e=tinymce.editors["ctb-content"];e&&!e.isHidden()?e.execCommand("mceInsertContent",!1,t):"undefined"!=typeof QTags?QTags.insertContent(t):I.$post_content.value+=t}function f(){if(!k.edit||!k.attachs)return!1;for(var t in k.attachs)x(k.attachs[t])}function g(){I.$file.addEventListener("change",h),I.$file.addEventListener("drop",v),I.$file.addEventListener("dragover",_)}function _(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}function v(t){t.stopPropagation(),t.preventDefault(),I.files=t.dataTransfer.files,I.file_count=I.files.length,I.file=I.files[0],I.file_index=0,$(I.files[0])}function h(t){t.stopPropagation(),t.preventDefault(),I.files=t.target.files.length?t.target.files:t.originalEvent.dataTransfer.files,I.file_count=I.files.length,I.file=I.files[0],I.file_index=0,$(I.files[0]),I.$file_progress.style.width="1px"}function $(t){var e=new FileReader;e.onload=function(e){b(t)},e.readAsDataURL(t)}function b(t){w();var e=new FormData,n=new XMLHttpRequest;e.append("type","upload"),e.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),e.append("img",t),n.open("post",k.process_url),n.onload=function(){n.status>=200&&n.status<400?E(n.responseText):y(n.responseText),n=null},n.upload.onprogress=function(t){if(t.lengthComputable){var e=t.loaded*I.file_index/(t.total*I.file_count)*100;I.$file_progress.style.width=e+"%"}},n.send(e)}function w(){var t=s(k.lang.M02,I.file_index+1,I.file_count);T("loading",t)}function y(t){t=t?t:k.lang.E01,T("error",t)}function E(t){try{t=JSON.parse(t)}catch(e){}if(I.file_index++,t&&"success"===t.status)if(x(t),I.file_count===I.file_index){var n=s(k.lang.M04,I.file_index,I.file_count);T("success",n),I.$file.value=""}else $(I.files[I.file_index]);else I.file_index>0,I.file_count>I.file_index?$(I.files[I.file_index]):(I.is_uploading=!1,t&&"error"===t.status?y(t.msg):(y(k.lang.E01),console.error(t)),I.$file.value="")}function x(t){var e=M(t);I.$files.style.display="block",I.$files.appendChild(e),e.style.display="block"}function M(e){I.$post_title||(I.$post_title=t("ctb-title"));var n=document.createElement("div"),a=""==I.$post_title?k.lang.M10:I.$post_title.value,r='<a class="img-link" href="'+e.full.url+'" target="_blank" title="'+k.lang.M06+'"><img src="'+e.thumbnail.url+'" alt="'+a+'" ></a><a href="javascript:;" class="btn btn-default btn-block ctb-insert-btn" id="ctb-insert-'+e["attach-id"]+'" data-size="large" data-attach-page-url="'+e["attach-page-url"]+'" data-width="'+e.large.width+'" data-height="'+e.large.height+'" data-large-url="'+e.large.url+'" ><i class="fa fa-plug"></i> '+k.lang.M09+'</a><input type="radio" name="ctb[thumbnail-id]" id="img-thumbnail-'+e["attach-id"]+'" value="'+e["attach-id"]+'" hidden class="img-thumbnail-checkbox" required ><label for="img-thumbnail-'+e["attach-id"]+'" class="ctb-set-cover-btn"><i class="fa fa-star"></i> '+k.lang.M07+'</label><input type="hidden" name="ctb[attach-ids][]" value="'+e["attach-id"]+'" >';n.id="img-"+e["attach-id"],n.setAttribute("class","thumbnail-tpl g-phone-1-2 g-tablet-1-3 g-desktop-1-4"),n.innerHTML=r,n.style.display="none",(!k.thumbnail_id&&!I.first_cover||e["attach-id"]==k.thumbnail_id)&&(n.querySelector(".img-thumbnail-checkbox").checked=!0,I.first_cover=!0);for(var i=n.querySelectorAll(".ctb-insert-btn"),o=function(){m(L({attach_page_url:this.getAttribute("data-attach-page-url"),width:this.getAttribute("data-width"),height:this.getAttribute("data-height"),img_url:e[this.getAttribute("data-size")].url}))},s=0,c=i.length;c>s;s++)i[s].addEventListener("click",o,!1);return n}function L(t){var e=""==I.$post_title?k.lang.M10:I.$post_title.value;return'<p><a href="'+t.attach_page_url+'" title="'+e+'" target="_blank" ><img src="'+t.img_url+'" alt="'+e+'" width="'+t.width+'" height="'+t.height+'"></a></p>'}function T(t,e){t&&"loading"!==t?(i(t,e),I.$file_progress_container.style.display="none",I.$file_area.style.display="block"):(i(t,e),I.$file_progress_container.style.display="block",I.$file_area.style.display="none")}function S(){I.$batch_insert.addEventListener("click",A)}function A(){var t=N.get_data_preview(),e=[],n=0;if(!t)return!1;var a=Object.keys(t).length;for(var r in t)e.push(L({attach_page_url:t[r]["attach-page-url"],img_url:t[r].large.url,width:t[r].large.width,height:t[r].large.height})),I.$split_number.value>0&&n>0&&a-1>n&&(n+1)%I.$split_number.value==0&&e.push(" <!--nextpage--> "),n++;e&&m(e.join(""))}function C(t){var e=new o;e.process_url=k.process_url,e.loading_tx=k.lang.M01,e.error_tx=k.lang.E01,e.$fm=t,e.done=function(e){k.edit&&t.querySelector(".submit").removeAttribute("disabled"),N.del()},e.init()}function H(){function e(t){var e=document.createElement("option");e.innerHTML=k.lang.M04,t.appendChild(e)}function n(){I.$parent_cat=document.createElement("select"),I.$parent_cat.name="ctb[cats][]",I.$parent_cat.classList.add("ctb-cat"),I.$parent_cat.classList.add("form-control"),I.$parent_cat.required=!0,e(I.$parent_cat);for(var t in k.cats)if(!(k.cats[t].parent>0)){var n=document.createElement("option");n.value=k.cats[t].term_id,n.title=k.cats[t].description,n.innerHTML=k.cats[t].name,I.$parent_cat.appendChild(n)}I.$parent_cat.addEventListener("change",r),I.$cat_container.appendChild(I.$parent_cat)}function a(t){var e=t.nextElementSibling;e&&(e.parentNode.removeChild(e),a(t))}function r(){a(this);var t=this.value,n=I["$cat_"+t];if(t){if(n)return void I.$cat_container.appendChild(n);for(var i in k.cats)if(k.cats[i].parent==t){var o=document.createElement("option");o.value=k.cats[i].term_id,o.title=k.cats[i].description,o.innerHTML=k.cats[i].name,n||(n=document.createElement("select"),n.name="ctb[cats][]",n.classList.add("ctb-cat"),n.classList.add("form-control"),e(n),n.addEventListener("change",r)),n.appendChild(o)}n&&I.$cat_container.appendChild(n)}}return k.cats?(I.$cat_container=t("ctb-cat-container"),void(I.$cat_container&&n())):!1}function q(){for(var e=document.querySelectorAll(".theme_custom_post_source-source-radio"),n=document.querySelectorAll(".theme_custom_post_source-inputs"),a=function(e){for(var a=e.getAttribute("target"),r=t(a),i=0,o=n.length;o>i;i++)if(r&&r.id===a&&e.checked){r.style.display="block";var s=r.querySelector("input");""===s.value.trim()&&s.focus()}else n[i].style.display="none"},r=function(){a(this)},i=0,o=e.length;o>i;i++)a(e[i]),e[i].addEventListener("change",r)}if(window.THEME_CONFIG.theme_custom_contribution){var I={},k={fm_id:"fm-ctb",file_area_id:"ctb-file-area",file_btn_id:"ctb-file-btn",file_id:"ctb-file",file_tip_id:"ctb-file-tip",files_id:"ctb-files",edit:!1,thumbnail_id:!1,attachs:!1,cats:!1,default_size:"large",process_url:"",lang:{M01:"Loading, please wait...",M02:"Uploading {0}/{1}, please wait...",M03:"Click to delete",M04:"{0} files have been uploaded.",M05:"Source",M06:"Click to view source",M07:"Set as cover.",M08:"Optional: some description",M09:"Insert",M10:"Preview",M11:"Large size",M12:"Medium size",M13:"Small size",E01:"Sorry, server is busy now, can not respond your request, please try again later."}};k=r(k,window.THEME_CONFIG.theme_custom_contribution);var N={config:{save_interval:30,lang:{M01:"You have a auto save version, do you want to restore? Auto save last time is {time}.",M02:"Restore completed.",M03:"The data has saved your browser."}},timer:!1,bind:function(){var e=this;this.save_key="auto-save-"+I.$post_id.value,this.check_version(),this.timer=setInterval(function(){e.save()},1e3*this.config.save_interval),I.$quick_save=t("ctb-quick-save"),I.$quick_save&&I.$quick_save.addEventListener("click",function(){""===I.$post_title.value?I.$post_title.focus():(e.save(),i("success",e.config.lang.M03,3))})},get:function(){var t=localStorage.getItem(this.save_key);return t?JSON.parse(t):!1},check_version:function(){var t=this.get();if(!t||!t.can_restore)return!1;var e=this.config.lang.M01.replace("{time}",t.time);return confirm(e)?(this.restore(),void i("success",this.config.lang.M02,3)):!1},get_data_preview:function(){var t=document.querySelectorAll(".ctb-insert-btn");if(!t[0])return!1;for(var e=document.querySelectorAll(".img-link"),n=document.querySelectorAll(" .img-link img"),a=document.querySelectorAll(".img-thumbnail-checkbox"),r={},i=0,o=t.length;o>i;i++)r[a[i].value]={"attach-page-url":t[i].getAttribute("data-attach-page-url"),full:{url:e[i].href},large:{url:t[i].getAttribute("data-large-url"),width:t[i].getAttribute("data-width"),height:t[i].getAttribute("data-height")},thumbnail:{url:n[i].src},"attach-id":a[i].value};return r},del:function(){localStorage.removeItem(this.save_key),clearInterval(this.timer)},save:function(){var e={can_restore:!1};""!==I.$post_title.value&&(e.title=I.$post_title.value,e.can_restore=!0),""!==I.$post_excerpt.value&&(e.excerpt=I.$post_excerpt.value,e.can_restore=!0);var n=p();if(""!==n&&(e.content=n,e.can_restore=!0),document.querySelector(".theme_custom_storage-group")){e.storage={},I.$storage_items=document.querySelectorAll(".theme_custom_storage-item");for(var a=0,r=I.$storage_items.length;r>a;a++)e.storage[a]||(e.storage[a]={}),e.storage[a]={type:t("theme_custom_storage-"+a+"-type").value,url:t("theme_custom_storage-"+a+"-url").value,download_pwd:t("theme_custom_storage-"+a+"-download-pwd").value,extract_pwd:t("theme_custom_storage-"+a+"-extract-pwd").value}}var i=document.querySelectorAll(".ctb-preset-tag:checked");if(i[0]){e.preset_tags={};for(var a=0,r=i.length;r>a;a++)e.preset_tags[a]||(e.preset_tags[a]={}),e.preset_tags[a]=i[a].id;e.can_restore=!0}var o=document.querySelectorAll(".ctb-custom-tag");if(o[0]){e.custom_tags={};for(var a=0,r=o.length;r>a;a++)e.custom_tags[o[a].id]||(e.custom_tags[o[a].id]={}),e.custom_tags[o[a].id]=o[a].value}var s=document.querySelector(".theme_custom_post_source-source-radio:checked");s&&(e.source={source:s.value,reprint_url:t("theme_custom_post_source-reprint-url").value,reprint_author:t("theme_custom_post_source-reprint-author").value}),e.preview=this.get_data_preview(),e.preview&&(e.can_restore=!0);var c=document.querySelector(".img-thumbnail-checkbox:checked");c&&(e.cover_id=c.value,e.can_restore=!0);var l=new Date;e.time=l.getFullYear()+"-"+l.getMonth()+"-"+l.getDate()+" "+l.getHours()+":"+l.getMinutes(),localStorage.setItem(this.save_key,JSON.stringify(e))},restore:function(){var e=this.get();if(!e||!e.can_restore)return!1;if(e.title&&(I.$post_title.value=e.title),e.excerpt&&(I.$post_excerpt.value=e.excerpt),e.content&&d(e.content),e.storage)for(var n in e.storage){var a=t("theme_custom_storage-"+n+"-type");if(a)t:for(var r=0,i=a.options;i>r;r++)if(a.options[r].value===e.storage[n].type){a.options[r].selected=!0;break t}a=t("theme_custom_storage-"+n+"-url"),a&&(a.value=e.storage[n].url),a=t("theme_custom_storage-"+n+"-download-pwd"),a&&(a.value=e.storage[n].download_pwd),a=t("theme_custom_storage-"+n+"-extract-pwd"),a&&(a.value=e.storage[n].extract_pwd)}if(e.preset_tags)for(var n in e.preset_tags){var o=t(e.preset_tags[n]);o&&(o.checked=!0)}if(e.custom_tags)for(var n in e.custom_tags){var s=t(n);s&&(s.value=e.custom_tags[n])}if(e.source&&e.source.source){var a=t("theme_custom_post_source-source-"+e.source.source),c=t("theme_custom_post_source-reprint-url"),l=t("theme_custom_post_source-reprint-author");c&&(c.value=e.source.reprint_url),c&&(l.value=e.source.reprint_author),a&&(a.checked=!0)}if(e.preview){e.cover_id&&(k.thumbnail_id=e.cover_id);for(var n in e.preview)x(u(e.preview[n]))}}};e()}}},,,,function(t,e,n){var a=n(1),r=n(3),i=n(5),o=n(12),s=n(2);t.exports=function(){"use strict";function t(){a(function(){return e(),N.$tabs_container?(g(),A(),void n()):!1})}function e(){if(N.$tabs_container=I("pm-tab"),!N.$tabs_container)return!1;N.$dialogs_container=document.querySelector(".pm-dialog-container"),N.$tmp_dialogs=document.querySelectorAll(".pm-dialog"),N.$tmp_tabs=N.$tabs_container.querySelectorAll("a"),N.$dialog_new=I("pm-dialog-new"),N.$dialog_new_uid=I("pm-dialog-content-new"),N.$tabs={},N.$dialogs={};var t=I("pm-loading-tip");t.parentNode.removeChild(t),I("pm-container").style.display="block",N.tab_count=N.$tmp_tabs.length;for(var e=0;e<N.tab_count;e++){var n=N.$tmp_tabs[e].getAttribute("data-uid"),a=N.$tmp_tabs[e].querySelector(".close");N.$tabs[n]=N.$tmp_tabs[e],N.$dialogs[n]=N.$tmp_dialogs[e],"new"!==n&&(k.userdata[n]={name:N.$tabs[n].querySelector(".author").innerHTML,avatar:N.$tabs[n].querySelector("img").src,url:N.$tabs[n].getAttribute("data-url")}),u(n),l(n),a&&a.addEventListener("click",y),"new"!==n&&N.$dialogs[n].addEventListener("submit",w)}for(var e=0;e<N.tab_count;e++){var n=N.$tmp_tabs[e].getAttribute("data-uid");n===k.uid&&(m(n),p(n),N.$current_tab=N.$tabs[n])}}function n(){N.preset_uid=c(),N.preset_uid&&(N.$tabs[N.preset_uid]?f(N.preset_uid):b(N.preset_uid))}function c(){return location.hash&&parseInt(location.hash.replace("#",""))}function l(t){function e(e){e.preventDefault(),e.stopPropagation(),m(t),p(t),C(t,"hide")}N.$tabs[t].addEventListener("click",e)}function u(t){var e=N.$dialogs[t].querySelector(".pm-dialog-list");e&&(e.scrollTop=e.scrollHeight)}function d(t){return N.$current_tab.getAttribute("uid")===t}function p(t){I("pm-dialog-content-"+t).focus()}function m(t){k.uid=t;for(var e in N.$tabs)e!=t?(N.$tabs[e].classList.remove("active"),N.$dialogs[e].style.display="none"):(N.$dialogs[t].style.display="block",N.$tabs[t].classList.add("active"))}function f(t){N.$tabs[t]||(N.$tabs[t]=I("pm-tab-"+t)),d(t)||m(t),p(t)}function g(){N.$dialog_new.addEventListener("submit",_)}function _(){var t=N.$dialog_new_uid.value;return N.$dialogs[t]?(f(t),!1):void b(t)}function v(t){N.$tabs[t]=i(M(t)),N.$tabs_container.appendChild(N.$tabs[t]),N.$tmp_tabs=N.$tabs_container.querySelectorAll("a")}function h(t){var e=i(L());e.addEventListener("click",y),N.$tabs[t].appendChild(e)}function $(t,e){N.$dialogs[t]=i(T(t,e)),N.$dialogs_container.appendChild(N.$dialogs[t])}function b(t){function e(e){"success"===e.status?(k.userdata[t]={avatar:e.avatar,name:e.name,url:e.url},r(e.status,e.msg,3),v(t),h(t),e.histories?$(t,x(e.histories)):$(t,S(t,k.lang.M05.replace("%name%",k.userdata[t].name))),N.$current_tab=N.$tabs[t],N.tab_count++,l(t),f(t),N.$dialogs[t].addEventListener("submit",w)):"error"===e.status?(r(e.status,e.msg,3),N.$dialog_new_uid.select()):(r("error",e),N.$dialog_new_uid.select())}r("loading",k.lang.M01);var n=new XMLHttpRequest;n.open("get",k.process_url+"&type=get-userdata&uid="+t+"&theme-nonce="+window.DYNAMIC_REQUEST["theme-nonce"]),n.send(),n.onload=function(){if(n.status>=200&&n.status<400){var t;try{t=JSON.parse(n.responseText)}catch(a){t=n.responseText}e(t)}else fail()},n.onerror=function(){r("error",k.lang.E01),N.$dialog_new_uid.select()}}function w(t){function e(t){t.status&&"success"===t.status?(r(t.status,t.msg,3),H(k.uid)):t.status&&"error"===t.status?r(t.status,t.msg,5):r("error",t),p(k.uid),a.removeAttribute("disabled")}function n(){r("error",k.lang.E01),p(k.uid),a.removeAttribute("disabled")}t.preventDefault();var a=N.$dialogs[k.uid].querySelector('button[type="submit"]');a.setAttribute("disabled",!0),r("loading",k.lang.M06);var i=new XMLHttpRequest,o=new FormData(this);o.append("type","send"),o.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),o.append("uid",k.uid),i.open("post",k.process_url),i.send(o),i.onload=function(){if(i.status>=200&&i.status<400){var t;try{t=JSON.parse(i.responseText)}catch(a){t=i.responseText}e(t)}else n()},i.onerror=n}function y(t){t.preventDefault(),t.stopPropagation();var e=this.parentNode,n=e.getAttribute("data-uid");k.uid==n&&(f("new"),N.$current_tab=N.$tabs["new"]),N.tab_count--,e.parentNode.removeChild(e),N.$dialogs[n].parentNode.removeChild(N.$dialogs[n]),delete N.$tabs[n],delete N.$dialogs[n];var a=new XMLHttpRequest,r=new FormData;a.open("post",k.process_url),r.append("uid",n),r.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),r.append("type","remove-dialog"),a.send(r)}function E(t,e){var n=t;"me"===t&&(n=k.uid);var a=N.$dialogs[n].querySelector(".pm-dialog-list");a.appendChild(i(S(t,e))),a.scrollTop=a.scrollHeight}function x(t){var e="";for(var n in t)e+=S(t[n]);return e}function M(t){return'<a id="pm-tab-'+t+'" href="javascript:;" data-uid="'+t+'" title="'+k.userdata[t].name+'"><img src="'+k.userdata[t].avatar+'" alt="avatar" class="avatar" width="24" height="24"> <span class="author">'+k.userdata[t].name+"</span></a>"}function L(){return'<b class="close">&times;</b>'}function T(t,e){return e||(e=""),'<form action="javascript:;" id="pm-dialog-'+t+'" class="pm-dialog"><div class="form-group pm-dialog-list">'+e+'</div><div class="form-group"><input type="text" id="pm-dialog-content-'+t+'" name="content" class="pm-dialog-conteng form-control" placeholder="'+k.lang.M02+'" required title="'+k.lang.M03+'"></div><div class="form-group"><button class="btn btn-success btn-block" type="submit"><i class="fa fa-check"></i>&nbsp;'+k.lang.M04+"</button></div></form>"}function S(t,e){var n=new Date,n=q(n,"yyyy/MM/dd hh:mm:ss"),a="me"===t?"me":"sender";return'<section class="pm-dialog-'+a+'"><div class="pm-dialog-bg"><h4><span class="name"><a href="'+k.userdata[t].url+'" target="_blank">'+k.userdata[t].name+'</a></span> <span class="date"> '+n+' </span></h4><div class="media-content">'+e+"</div></div></section>"}function A(){function t(t){if(t&&"success"===t.status){var e=t.pm.pm_author,n=t.pm.pm_receiver;N.timestamp=t.timestamp,e==k.my_uid&&N.$dialogs[n]?(E("me",t.pm.pm_content),H(n)):(k.userdata[e]||(k.userdata[e]={name:t.pm.pm_author_name,avatar:t.pm.pm_author_avatar,url:t.pm.url}),N.$dialogs[e]||(v(e),h(e),$(e),N.$dialogs[e].style.display="none",C(e),N.tab_count++,l(e),N.$dialogs[e].addEventListener("submit",w)),E(e,t.pm.pm_content),k.uid!=e&&C(e)),A()}else t&&"error"===t.status?"timeout"===t.code&&A():setTimeout(function(){A()},3e4)}function e(){setTimeout(function(){A()},3e4)}var n=new XMLHttpRequest;N.timestamp||(N.timestamp=window.DYNAMIC_REQUEST.theme_custom_pm.timestamp),n.open("get",k.process_url+"&"+o({type:"comet","theme-nonce":window.DYNAMIC_REQUEST["theme-nonce"],timestamp:N.timestamp})),n.send(),n.onload=function(){if(n.status>=200&&n.status<400){var a;try{a=JSON.parse(n.responseText)}catch(r){a=n.responseText}t(a)}else e()},n.onerror=e}function C(t,e){"hide"===e?N.$tabs[t].classList.remove("new-msg"):N.$tabs[t].classList.add("new-msg")}function H(t){N.$inputs||(N.$inputs={}),N.$inputs[t]||(N.$inputs[t]=I("pm-dialog-content-"+t)),N.$inputs[t].focus(),N.$inputs[t].value=""}function q(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in n)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return e}function I(t){return document.getElementById(t)}if(window.THEME_CONFIG.theme_custom_pm){var k={lang:{M01:"Loading, please wait...",M02:"Enter to send P.M.",M03:"P.M. content",M04:"Send P.M.",M05:"Hello, I am %name%, welcome to chat with me what do you want.",M06:"P.M. is sending, please wait...",E01:"Sorry, server is busy now, can not respond your request, please try again later."},uid:"new",my_uid:"",userdata:{}},N={};k=s(k,window.THEME_CONFIG.theme_custom_pm),t()}}},function(t,e,n){var a=n(1),r=n(2),i=n(3);t.exports=function(){"use strict";function t(){a(function(){return e(),c.$fm_loading?void n():!1})}function e(){return c.$fm_loading=s("fm-bomb-loading"),c.$fm_loading?(c.$fm=s("fm-bomb"),c.$attacker_points=s("bomb-attacker-points"),c.$target=s("bomb-target"),c.$target_name=s("bomb-target-name"),c.$target_points=s("bomb-target-points"),c.$target_avatar=s("bomb-target-avatar"),c.$points=document.querySelectorAll(".bomb-points"),c.$fm?(c.$submit=c.$fm.querySelector(".submit"),c.$fm_loading.parentNode.removeChild(c.$fm_loading),c.$fm.style.display="block",c.$fm.addEventListener("submit",o),c.$target.addEventListener("blur",u.bind,!0),void(""===c.$target.value.trim()||isNaN(c.$target.value)||u.init(c.$target.value))):!1):!1}function n(){function t(t){e(this)}function e(t){for(var e,n=t.parentNode,a=0,r=c.$points.length;r>a;a++)e=c.$points[a].parentNode,e.classList.contains("label-success")&&e.classList.remove("label-success");n.classList.add("label-success"),c.points=parseInt(t.value)}for(var n=0,a=c.$points.length;a>n;n++)c.$points[n].checked&&e(c.$points[n]),c.$points[n].addEventListener("change",t)}function o(t){t.preventDefault(),i("loading",l.lang.M02),c.$submit.setAttribute("disabled",!0);var e=new XMLHttpRequest,n=new FormData(c.$fm);n.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),e.open("POST",l.process_url),e.send(n),e.onload=function(){var t;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}if(t&&"success"===t.status){var a=parseInt(c.$attacker_points.textContent.trim()),r=parseInt(c.$target_points.textContent.trim());if(t.hit)i(t.status,t.msg),c.$attacker_points.innerHTML=a+'<span class="text-success">+'+c.points+"</span>",setTimeout(function(){c.$attacker_points.innerHTML=a+c.points},3e3),c.$target_points.innerHTML=r+'<span class="text-danger">-'+c.points+"</span>",setTimeout(function(){c.$target_points.innerHTML=r-c.points},3e3);else{i("warning",t.msg);var o=Math.round(c.points/2);c.$attacker_points.innerHTML=a+'<span class="text-danger">-'+c.points+"</span>",setTimeout(function(){c.$attacker_points.innerHTML=a-c.points},3e3),c.$target_points.innerHTML=r+'<span class="text-success">+'+o+"</span>",setTimeout(function(){c.$target_points.innerHTML=r+o},3e3)}}else t&&"error"===t.status?i(t.status,t.msg):i("error",window.THEME_CONFIG.lang.E01);c.$submit.removeAttribute("disabled")},e.onerror=function(){i("error",window.THEME_CONFIG.lang.E01),c.$submit.removeAttribute("disabled")}}function s(t){return document.getElementById(t)}if(window.THEME_CONFIG.theme_custom_point_bomb){var c={},l={process_url:"",lang:{M01:"Target locking...",M02:"Bombing, please wait..."}};l=r(l,window.THEME_CONFIG.theme_custom_point_bomb);var u={bind:function(){return c.target_id=c.$target.value.trim(),""===c.target_id||isNaN(c.target_id)?!1:void u.init(c.target_id)},init:function(t){this.get_target_form_cache(t)?this.set_target(t):this.get_target_form_server(t)},get_target_form_server:function(t){var e=this,n=new XMLHttpRequest;i("loading",l.lang.M01),n.open("GET",l.process_url+"&type=get-target&target="+t+"&theme-nonce="+window.DYNAMIC_REQUEST["theme-nonce"]),n.send(),n.onload=function(){if(n.status>=200&&n.status<400){var a;try{a=JSON.parse(n.responseText)}catch(r){a=n.responseText}a&&"success"===a.status?(e.set_target_cache(t,{name:a.name,points:a.points,avatar:a.avatar}),e.set_target(t),i(a.status,a.msg),c.$submit.removeAttribute("disabled")):a&&"error"===a.status?(c.$target.select(),i(a.status,a.msg)):(i("error",a),c.$target.select())}else i("error",window.THEME_CONFIG.lang.E01)},n.onerror=function(){i("error",window.THEME_CONFIG.lang.E01)}},set_target:function(t){c.$target_points.innerHTML=c.users[t].points,c.$target_name.innerHTML=c.users[t].name,c.$target_avatar.src=c.users[t].avatar},get_target_form_cache:function(t){return c.users&&c.users[t]},set_target_cache:function(t,e){c.users||(c.users=[]),c.users[t]=e}};t()}}},,function(t,e,n){var a=n(1),r=n(3),i=n(2),o=n(9);t.exports=function(){"use strict";function t(){return c.$hgihlight_point=s("modify-count"),c.$hgihlight_point?(c.$point_count=s("point-count"),c.$fm=s("fm-lottery"),c.$fm?void e():!1):!1}function e(){function t(t){"warning"===t.status&&r(t.status,t.msg),"error"!==t.status&&n(parseInt(t["new-points"])-parseInt(c.$point_count.innerHTML))}function e(){c.$fm.querySelector(".submit").removeAttribute("disabled")}var a=new o;a.process_url=l.process_url,a.loading_tx=l.lang.M01,a.error_tx=window.THEME_CONFIG.lang.E01,a.$fm=c.$fm,a.done=t,a.always=e,a.init()}function n(t){t>0?(c.$hgihlight_point.classList.add("plus"),c.$hgihlight_point.innerHTML="+"+t):(c.$hgihlight_point.classList.add("mins"),c.$hgihlight_point.innerHTML=t),c.$hgihlight_point.style.display="inline",setTimeout(function(){c.$hgihlight_point.classList.remove("plus"),c.$hgihlight_point.classList.remove("mins"),c.$hgihlight_point.style.display="none",c.$point_count.innerHTML=parseInt(c.$point_count.innerHTML)+t},2e3)}function s(t){return document.getElementById(t)}if(window.THEME_CONFIG.theme_point_lottery){var c={},l={process_url:"",lang:{M01:"Results coming soon..."}};l=i(l,window.THEME_CONFIG.theme_point_lottery),a(t)}}},,,,function(t,e,n){var a=n(1),r=n(3),i=n(2);t.exports=function(){"use strict";function t(){a(n)}function e(t){return document.getElementById(t)}function n(){s.$fm=e("fm-change-avatar"),s.$fm&&(s.$crop_container=e("cropper-container"),s.$avatar_preview=e("avatar-preview"),s.$crop_done_btn=e("cropper-done-btn"),s.$base64=e("avatar-base64"),o())}function o(){function t(t){t.stopPropagation(),t.preventDefault(),s.files=t.target.files.length?t.target.files:t.originalEvent.dataTransfer.files,s.file=s.files[0],n(s.file)}function n(t){var e=new FileReader;e.onload=function(n){return-1===t.type.indexOf("image")?(alert("Invaild file type."),!1):(s.$crop_container.innerHTML='<img src="'+e.result+'" alt="cropper">',s.$crop_container.style.display="block",s.$crop_img=s.$crop_container.querySelector("img"),s.$avatar_preview.style.display="block",
s.cp=new Cropper(s.$crop_img,{aspectRatio:1,preview:"#avatar-preview",minCropBoxWidth:150,minCropBoxHeight:150}),void(s.$crop_done_btn.style.display="block"))},e.readAsDataURL(t)}function a(){var t=new XMLHttpRequest,e=new FormData,n=s.$fm.querySelector("[type=submit]");r("loading",window.THEME_CONFIG.lang.M01),n.setAttribute("disabled",!0),e.append("theme-nonce",window.DYNAMIC_REQUEST["theme-nonce"]),e.append("type","avatar"),e.append("b4",s.cp.getCroppedCanvas().toDataURL("image/jpeg",.75)),t.open("POST",c.process_url),t.send(e),t.onload=function(){if(t.status>=200&&t.status<400){var e;try{e=JSON.parse(t.responseText)}catch(a){e=t.responseText}e&&"success"===e.status?(r(e.status,e.msg),location.reload()):e&&"error"===e.status?(r(e.status,e.msg),n.removeAttribute("disabled")):(r("error",window.THEME_CONFIG.lang.E01),n.removeAttribute("disabled"))}else r("error",window.THEME_CONFIG.lang.E01),n.removeAttribute("disabled")},t.onerror=function(){r("error",window.THEME_CONFIG.lang.E01),n.removeAttribute("disabled")}}s.$file=e("file"),s.$file.addEventListener("drop",t,!1),s.$file.addEventListener("change",t,!1),s.$fm.addEventListener("submit",a,!1)}if(window.THEME_CONFIG.theme_custom_user_settings){var s={},c={process_url:""};c=i(c,window.THEME_CONFIG.theme_custom_user_settings),t()}}},function(t,e,n){var a=n(1),r=n(9),i=n(2);t.exports=function(){"use strict";function t(){a(e)}function e(){o.$fm=document.querySelector(".user-form"),o.$fm&&n(o.$fm)}function n(t){var e=new r;e.process_url=s.process_url,e.loading_tx=window.THEME_CONFIG.lang.M01,e.error_tx=window.THEME_CONFIG.lang.E01,e.$fm=t,e.init()}if(window.THEME_CONFIG.theme_custom_user_settings){var o={},s={process_url:""};s=i(s,window.THEME_CONFIG.theme_custom_user_settings),t()}}},,,,function(t,e){t.exports=function(t,e,n){for(var a,r=0,i=e.length;i>r;r++)a=new RegExp(e[r],"g"),t=t.replace(a,n[r]);return t}},,,,function(t,e){t.exports=function(){var t=arguments;return arguments[0].replace(/\{(\d+)\}/g,function(e,n){return t[parseInt(n)+1]})}}]);